<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Predator prey · EvoDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">EvoDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../model_description/">Model description</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../example1/">Simple Wright-Fisher</a></li><li class="is-active"><a class="tocitem" href>Predator prey</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Predator prey</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Predator prey</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/kavir1698/EvoDynamics.jl/blob/master/examples/example2.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Predator-prey"><a class="docs-heading-anchor" href="#Predator-prey">Predator prey</a><a id="Predator-prey-1"></a><a class="docs-heading-anchor-permalink" href="#Predator-prey" title="Permalink"></a></h1><p>Here we create a predator prey model of two species, one haploid and one diploid.</p><pre><code class="language-julia hljs">using EvoDynamics</code></pre><p>Model parameters are in a .jl file as follows:</p><pre><code class="language-julia hljs">## 1. Functions

function bn(agent::AbstractAgent, model::ABM)
  return false
end

function optphens2(site::Tuple{Int,Int}, model::ABM)
  opt1 = [0.8214794136627462, 0.49335401288317304, 0.3435556249656141, 0.25050033180075226]
  opt2 = opt1 .+ 0.1
  ss = EvoDynamics.coord2vertex(site, model)
  if model.step[1] &gt; 6
    return [opt1[ss]]
  else
    return [opt2[ss]]
  end
end

function optphens3(site::Tuple{Int,Int}, model::ABM)
  phenotypic_values = [[0.7614758101208934 2.3911353663016586; 2.2091361414343313 1.7858661540288683; 0.7920974352892358 0.7630236717263839; 2.587205421882114 2.311211631439866],
    [0.6437641305315445 2.097629262577973; 0.9954545836033715 1.1314248848669466; 2.469792530385348 1.490299526620522; 1.6158867433451882 0.2566056477862022]]
  agent_site = (site[2] - 1) * size(model.space)[2] + (site[1])
  if model.step[1] &gt; 7
    return phenotypic_values[1][agent_site, :]
  else
    return phenotypic_values[2][agent_site, :]
  end
end

env_resources2(time::Int) = [200 220; 183 190]

## 2. Species parameters

species1 = Dict(
  :name =&gt; &quot;a&quot;,
  :number_of_genes =&gt; 7,
  :number_of_phenotypes =&gt; 4,
  :abiotic_phenotypes =&gt; [1],
  :biotic_phenotypes =&gt; [2, 3],
  :migration_phenotype =&gt; 4,
  :migration_threshold =&gt; 3.5,
  :vision_radius =&gt; 1,
  :check_fraction =&gt; 0.5,
  :ploidy =&gt; 2,
  :epistasis_matrix =&gt; [1.0 0.43 -0.41 0.38 0.48 -0.43 -0.1 -0.08 -0.09 -0.5 0.41 0.44 -0.21 -0.12; 0.34 1.0 -0.19 -0.36 0.38 -0.28 0.24 -0.22 0.12 0.12 -0.12 -0.39 0.21 0.26; 0.05 0.27 1.0 0.04 0.01 -0.14 0.3 -0.28 0.43 -0.13 0.2 -0.02 0.25 -0.39; -0.12 0.33 -0.48 1.0 -0.4 -0.48 -0.22 -0.36 -0.24 -0.07 -0.12 -0.49 -0.37 0.27; 0.25 0.25 -0.14 0.49 1.0 0.28 -0.34 -0.49 0.45 -0.14 0.26 -0.13 -0.44 -0.17; -0.47 0.19 -0.24 0.41 0.08 1.0 0.11 0.03 0.15 0.49 0.04 0.41 -0.19 0.13; 0.37 0.09 -0.11 0.4 0.42 0.45 1.0 -0.01 -0.47 0.07 0.5 0.44 -0.18 -0.2; -0.32 0.15 0.4 -0.24 -0.21 0.5 0.22 1.0 -0.33 0.48 -0.49 0.07 0.5 -0.07; 0.02 -0.16 0.33 0.48 -0.42 0.39 0.2 -0.11 1.0 0.46 -0.06 0.22 -0.3 0.31; 0.41 -0.18 -0.16 -0.4 0.01 0.04 0.07 0.2 -0.37 1.0 -0.33 0.49 0.05 -0.42; 0.03 0.25 0.14 -0.36 0.28 -0.18 0.09 -0.2 0.46 -0.48 1.0 -0.21 0.41 -0.46; 0.0 0.44 -0.34 -0.42 0.37 -0.04 0.43 -0.25 0.21 0.19 0.29 1.0 -0.02 0.06; 0.46 -0.1 0.14 -0.22 -0.26 0.13 -0.5 -0.41 -0.31 0.0 -0.15 0.29 1.0 0.17; -0.22 0.21 0.46 -0.01 -0.35 -0.11 0.25 -0.03 0.18 -0.38 -0.4 -0.28 0.05 1.0],
  :pleiotropy_matrix =&gt; Bool[1 1 0 0 0 0 0 1 0 1 0 1 0 1; 1 0 1 1 1 0 1 1 1 0 0 1 1 0; 1 0 1 0 1 0 0 0 0 0 1 0 1 0; 0 0 0 0 1 0 0 1 1 1 1 0 1 0],
  :growth_rate =&gt; 0.8,
  :expression_array =&gt; [0.28878032859775615, 0.4629421231828499, 0.26092147517051467, 0.952859489607121, 0.9638502824424, 0.05038142018016245, 0.05930756376654234, 0.033459292878885716, 0.32421526342800044, 0.9029235877297073, 0.7670060809312949, 0.12766808941531993, 0.8656895869985795, 0.342191940658253],
  :selection_coefficient =&gt; 0.5,
  :mutation_probabilities =&gt; [0.9, 0.0, 0.0],
  :mutation_magnitudes =&gt; [0.05, 0.0, 0.01],
  :N =&gt; [1000, 0, 0, 0],
  :environmental_noise =&gt; 0.01,
  :optimal_phenotypes =&gt; optphens2,
  :bottleneck_function =&gt; bn,
  :age =&gt; 5,
  :recombination =&gt; 1,
  :initial_energy =&gt; 0,
  :reproduction_start_age =&gt; 1,
  :reproduction_end_age =&gt; 5,
)

species2 = Dict(
  :name =&gt; &quot;b&quot;,
  :number_of_genes =&gt; 8,
  :number_of_phenotypes =&gt; 5,
  :abiotic_phenotypes =&gt; [1, 2],
  :biotic_phenotypes =&gt; [3, 4],
  :migration_phenotype =&gt; 5,
  :migration_threshold =&gt; 3.4,
  :vision_radius =&gt; 1,
  :check_fraction =&gt; 0.5,
  :ploidy =&gt; 1,
  :epistasis_matrix =&gt; [1.0 -0.01 -0.01 -0.34 -0.42 0.18 -0.09 0.13; 0.28 1.0 -0.21 -0.11 0.12 -0.46 0.21 -0.39; 0.0 0.28 1.0 0.1 0.09 0.3 0.1 0.17; 0.0 -0.42 0.05 1.0 -0.11 -0.07 -0.27 0.43; 0.31 0.47 -0.42 -0.34 1.0 -0.4 0.16 0.11; -0.19 0.29 -0.33 -0.49 0.17 1.0 -0.1 -0.28; -0.43 0.38 -0.06 0.39 0.21 -0.5 1.0 -0.08; 0.26 0.27 -0.44 -0.08 0.47 -0.27 -0.27 1.0],
  :pleiotropy_matrix =&gt; Bool[1 0 0 0 1 1 0 0; 1 0 0 1 1 0 1 1; 0 1 1 1 1 1 0 1; 1 0 1 0 0 1 0 1; 1 1 0 1 1 1 1 1],
  :growth_rate =&gt; 1.2,
  :expression_array =&gt; [0.24923147816626035, 0.7155732641738595, 0.9655184311211502, 0.8638149724268844, 0.5075272565823061, 0.9189652626508431, 0.7897640036022151, 0.17091233765481717],
  :selection_coefficient =&gt; 0.5,
  :mutation_probabilities =&gt; [0.9, 0.0, 0.0],
  :mutation_magnitudes =&gt; [0.05, 0.0, 0.01],
  :N =&gt; [1000, 0, 0, 0],
  :environmental_noise =&gt; 0.01,
  :optimal_phenotypes =&gt; optphens3,
  :bottleneck_function =&gt; bn,
  :age =&gt; 3,
  :recombination =&gt; 1,
  :initial_energy =&gt; 0,
  :reproduction_start_age =&gt; 1,
  :reproduction_end_age =&gt; 3,
)

## 3. Model parameters

#NB this dict should be called model_parameters
model_parameters = Dict(
  :species =&gt; [species1, species2],
  :generations =&gt; 14,
  :space =&gt; (2, 2),
  :metric =&gt; &quot;chebyshev&quot;,
  :periodic =&gt; false,
  :resources =&gt; env_resources2,
  :interactions =&gt; [0.1 0.0; 0.0 -1.0],
  :food_sources =&gt; [1.0 0.5; 0.0 0.0],
  :seed =&gt; nothing
)</code></pre><pre><code class="language- hljs">param_file = &quot;../../examples/paramfile2.jl&quot;  #hide
agentdata, modeldata, model = runmodel(param_file);

modeldata</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../example1/">« Simple Wright-Fisher</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Saturday 27 August 2022 22:50">Saturday 27 August 2022</span>. Using Julia version 1.8.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
